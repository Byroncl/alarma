<!DOCTYPE html>
<html>
<head>
    <title>Monitor Distribuido PIR</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; background: #222; color: white; }
        #status { font-size: 2em; padding: 20px; border-radius: 10px; }
        .alert { background: red; animation: blink 1s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <h1>Sistema de Vigilancia Distribuido</h1>
    <div id="status">Esperando señal...</div>

    <audio id="audioAlerta" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>

    <script>
        var socket = io();
        var statusDiv = document.getElementById('status');
        var audio = document.getElementById('audioAlerta');

        socket.on('alerta_movimiento', function(data) {
            statusDiv.innerHTML = data.msg;
            statusDiv.classList.add('alert');
            audio.play(); // EMITIR SONIDO

            // Quitar alerta después de 3 segundos
            setTimeout(function() {
                statusDiv.innerHTML = "Monitoreando...";
                statusDiv.classList.remove('alert');
            }, 3000);
        });
    </script>
</body>
</html>